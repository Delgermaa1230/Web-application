<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>loved teachers</title>
    <link rel="icon" type="image/png" href="/imgs/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../styles/header_footer.css">
    <link rel="stylesheet" href="../styles/index.css">
    <link rel="stylesheet" href="../styles/searchResult.css">

</head>

<body>
    <header>
        </div>
        <nav>
            <a href="/index.html">Буцах</a>
            <a href="#"><i class="fa fa-question"></i></a>
            <!-- <a href="/pages/profile.html"><i class="fa fa-user"></i></a> -->
        </nav>
    </header>
    <div class="main">
        <section class="container">
            <h2 style="margin-bottom: var(--base-size-x3);">Танд таалагдсан багш нар</h2>
            <div class="tutors-box" id="lovedTutors">
            </div>
            <script src="../js/loved.js"></script>
        </section>
        <div></div>
    </div>
    <footer>
        <ul>
            <li>
                <h4>Тусламж</h4>
                <ul>
                    <li><a href="">FAQs</a></li>
                    <li><a href="">Заавар</a></li>
                </ul>
            </li>
            <li>
                <h4>Холбогдох</4>
                    <ul>
                        <li>Утас:<a href="tel:+97688888811">+976 88 888811</a></li>
                        <li>Мэйл:<a href="mailto: example@teach.com">example@teach.com</a></li>
                    </ul>
            </li>
            <li>
                <h4>Холбоосууд</h4>
                <ul id="social-icons">
                    <li><a href="https://www.instagram.com/" target="_blank"><i class="fa fa-instagram"></i></a></li>
                    <li><a href="whttps://www.facebook.com/" target="_blank"><i class="fa fa-facebook"></i></a></li>
                </ul>
            </li>
        </ul>
    </footer>

    <script type="module" src="../js/searchResult/SR-tutorSec.js"></script>
    <script type="module">
        document.addEventListener("DOMContentLoaded", async () => {
            const { default: tutor, loadLovedTeacherData } = await import("../js/searchResult/SR-tutorSec.js");
            const lovedTeachers = await loadLovedTeacherData();
            const tutorsBox = document.getElementById("topTutors");

            if (!lovedTeachers || lovedTeachers.length === 0) {
                tutorsBox.innerHTML = "<p>Танд таалагдсан багш нар одоогоор алга байна.</p>";
                return;
            }

            const tutorsHTML = lovedTeachers
                .map(teacher => (new tutor(teacher)).render())
                .join('');

            tutorsBox.insertAdjacentHTML("beforeend", tutorsHTML);
        });

        window.loveButtonClick = function (event, teacherName) {
            event.stopPropagation();
            event.preventDefault();

            let lovedTeachers = JSON.parse(localStorage.getItem("lovedTeachers")) || [];
            const isLoved = lovedTeachers.includes(teacherName);

            if (isLoved) {
                lovedTeachers = lovedTeachers.filter(name => name !== teacherName);
                alert(`${teacherName} таны таалагдсан жагсаалтаас хасагдлаа!`);
                location.reload();
            }

            localStorage.setItem("lovedTeachers", JSON.stringify(lovedTeachers));
        }
    </script>
    </script>



</body>

</html>